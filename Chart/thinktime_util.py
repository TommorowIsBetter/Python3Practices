#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
@author:Wang Yan
@ide:PyCharm
@time:2019/5/7 17:03
"""
from pyecharts import Page, Bar

def percentOfAccuracy(predict_list, real_list):
    dict_accuracy = {}
    acc_negative = 0
    acc00_10 = 0
    acc10_20 = 0
    acc20_30 = 0
    acc30_40 = 0
    acc40_50 = 0
    acc50_60 = 0
    acc60_70 = 0
    acc70_80 = 0
    acc80_90 = 0
    acc90_100 = 0
    for pre, real in zip(predict_list, real_list):
        accuracy = 1 - abs(pre - real) / real
        accuracy = accuracy * 100
        if 0 < accuracy <= 10:
            acc00_10 += 1
        elif 10 < accuracy <= 20:
            acc10_20 += 1
        elif 20 < accuracy <= 30:
            acc20_30 += 1
        elif 30 < accuracy <= 40:
            acc30_40 += 1
        elif 40 < accuracy <= 50:
            acc40_50 += 1
        elif 50 < accuracy <= 60:
            acc50_60 += 1
        elif 60 < accuracy <= 70:
            acc60_70 += 1
        elif 70 < accuracy <= 80:
            acc70_80 += 1
        elif 80 < accuracy <= 90:
            acc80_90 += 1
        elif 90 < accuracy <= 100:
            acc90_100 += 1
        else:
            acc_negative += 1
    dict_accuracy['acc00_10'] = acc00_10
    dict_accuracy['acc10_20'] = acc10_20
    dict_accuracy['acc20_30'] = acc20_30
    dict_accuracy['acc30_40'] = acc30_40
    dict_accuracy['acc40_50'] = acc40_50
    dict_accuracy['acc50_60'] = acc50_60
    dict_accuracy['acc60_70'] = acc60_70
    dict_accuracy['acc70_80'] = acc70_80
    dict_accuracy['acc80_90'] = acc80_90
    dict_accuracy['acc90_100'] = acc90_100
    dict_accuracy['acc_negative'] = acc_negative
    page = Page()
    attr = ['acc_negative', 'acc00_10', 'acc10_20', 'acc20_30', 'acc30_40', 'acc40_50', 'acc50_60', 'acc60_70',
            'acc70_80', 'acc80_90',  'acc90_100']
    v1 = [acc_negative, acc00_10, acc10_20, acc20_30, acc30_40, acc40_50, acc50_60, acc60_70, acc70_80, acc80_90,
          acc90_100]
    bar1 = Bar("柱状图示例")
    bar1.add("精确度分布情况", attr, v1, xaxis_interval=0, xaxis_rotate=30)
    page.add(bar1)
    page.render('thinkTime_chart.html')


list_1 = [9.12, 12.3, 13.45, 18.13, 15.78, 15.48, 15.57, 11.31, 18.13, 13.76, 22.21, 15.54, 14.35, 13.72, 14.44, 14.14,
          11.22, 17.93, 11.23, 14.61, 21.21, 21.16, 19.86, 20.52, 20.62, 22.2, 20.48, 25.5, 21.26, 19.4, 20.06, 10.37,
          16.44, 14.28, 18.54, 18.84, 22.54, 21.24, 15.62, 17.59, 26.8, 19.01, 16.81, 16.07, 19.49, 24.22, 14.35, 19.58,
          14.38, 16.13, 22.08, 24.14, 16.87, 14.02, 14.69, 17.42, 21.35, 16.59, 6.08, 18.22, 14.17, 10.37, 7.53, 9.35,
          12.06, 15.16, 16.12, 14.11, 8.7, 16.51, 9.39, 9.0, 8.55, 16.56, 16.56, 13.84, 12.56, 9.36, 6.2, 13.18, 14.8,
          14.11, 9.7, 8.93, 15.11, 15.24, 10.43, 10.51, 13.47, 14.45, 11.66, 13.18, 12.37, 15.21, 14.46, 15.82, 11.68,
          10.52, 11.68, 11.44, 15.14, 12.95, 17.12, 10.86, 12.28, 22.44, 22.9, 16.81, 19.06, 24.83, 15.17, 20.18, 22.38,
          20.87, 15.4, 16.87, 16.71, 13.79, 20.88, 12.41, 6.08, 22.71, 11.67, 15.77, 15.4, 17.42]
list_2 = [2.57, 2.09, 9.08, 17.73, 25.43, 22.14, 14.6, 3.26, 22.87, 14.38, 30.37, 16.82, 12.27, 17.9, 11.19, 9.42, 3.06,
          15.41, 2.38, 9.44, 21.02, 25.54, 14.36, 20.96, 31.59, 14.09, 39.85, 25.49, 31.54, 36.0, 18.54, 6.76, 17.54,
          15.15, 10.61, 31.88, 29.77, 19.99, 8.06, 13.82, 22.98, 5.37, 23.99, 30.37, 16.18, 23.71, 16.47, 4.77, 2.84,
          17.98, 12.29, 8.88, 6.99, 5.55, 8.02, 15.4, 37.02, 19.8, 19.99, 7.95, 1.87, 9.49, 1.99, 2.15, 17.11, 21.9,
          21.19, 7.2, 6.51, 17.24, 12.86, 8.62, 1.01, 1.12, 2.44, 13.73, 1.1, 8.37, 6.45, 3.61, 6.45, 6.12, 3.82, 1.6,
          3.17, 7.48, 2.08, 2.31, 4.74, 6.88, 1.73, 4.39, 6.67, 1.17, 14.31, 21.8, 3.73, 4.9, 5.78, 3.96, 1.01, 11.73,
          6.88, 9.14, 13.69, 22.23, 16.91, 19.72, 9.25, 23.35, 20.73, 13.75, 19.76, 10.65, 12.82, 15.07, 6.71, 13.94,
          2.82, 2.73, 1.91, 9.71, 3.67, 14.23, 7.4, 15.84]
print(len(list_2))
percentOfAccuracy(list_1, list_2)
